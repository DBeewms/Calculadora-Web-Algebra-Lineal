{% extends "algebra/base.html" %}
{% block title %}Suma{% endblock %}
{% block content %}
<h2>Suma de matrices (A + B)</h2>
<form method="post" class="matrix-form" data-mode="sum">{% csrf_token %}
  <div class="controls">
    <div class="control">
      <label>Filas</label>
      <input type="number" min="1" value="2" data-target="rows"/>
    </div>
    <div class="control">
      <label>Columnas</label>
      <input type="number" min="1" value="2" data-target="cols"/>
    </div>
    <div class="control">
      <label>Formato de resultado</label>
      <select name="result_format">
        <option value="frac" {% if result_format == 'frac' or not result_format %}selected{% endif %}>Fracciones exactas</option>
        <option value="dec" {% if result_format == 'dec' %}selected{% endif %}>Decimales</option>
        <option value="auto" {% if result_format == 'auto' %}selected{% endif %}>Autom치tico (exacto si finito)</option>
      </select>
    </div>
    <div class="control" style="display:none">
      <label>Precisi칩n (decimales)</label>
      <input type="number" name="precision" min="0" max="12" value="{{ precision|default:6 }}" />
    </div>
    <button type="button" class="btn" data-action="resize">Actualizar tama침o</button>
    <button type="button" class="btn ghost" data-action="open-eq">Introducir ecuaciones</button>
  </div>
  <div class="grid matrices panel">
    <div>
      <label>Matriz A</label>
      <div class="matrix" data-name="matrizA"></div>
      <input type="hidden" name="matrizA"/>
    </div>
    <div>
      <label>Matriz B</label>
      <div class="matrix" data-name="matrizB"></div>
      <input type="hidden" name="matrizB"/>
    </div>
  </div>
  {% include "algebra/_equations_toggle.html" %}
  <div class="actions">
    <button type="button" class="btn secondary" data-action="clear">Limpiar</button>
    <button type="button" class="btn ghost" data-action="example" data-example="sum">Ejemplo</button>
    <button type="submit" class="btn primary">Calcular</button>
  </div>
</form>

{# Panel de error eliminado: SweetAlert maneja la notificaci칩n en base.html #}

{% if resultado %}
<section class="panel">
  <div class="panel-header">
    <h3 class="panel-title">Resultado</h3>
    <div class="panel-actions">
      <span class="badge">A {{ dims.A }}</span>
      <span class="badge">B {{ dims.B }}</span>
      <span class="badge">C {{ dims.C }}</span>
      <span class="badge">A + B</span>
    </div>
  </div>
  <div class="matrix-result">
    <table class="matriz">
      {% for fila in resultado %}
        <tr>{% for celda in fila %}<td><span>{{ celda }}</span></td>{% endfor %}</tr>
      {% endfor %}
    </table>
  </div>
</section>
{% endif %}
{% block extra_js %}{% endblock %}
{% endblock %}
